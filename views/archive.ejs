<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Archive | Midnight Club</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Staatliches|Ubuntu" rel="stylesheet">

    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
   <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
   <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
   <link href="https://fonts.googleapis.com/css?family=Kelly+Slab" rel="stylesheet">

    <style>

        body { 
            padding-top:15px; 
            background-color: #ccc;
            font-size: 20px;
        }

        img { 
            width: 100%; 
            height: 30em;
        }

        .navbar {
            background: black !important;
        }

        .navbar-nav  li a:hover {
            color: white !important;
        }

        .navbar-default .navbar-brand:focus, .navbar-default .navbar-brand {
            color: white !important;
        }
        
    </style>
 
</head>
<body>
    <!-- Navbar -->
<% include partials/menu.ejs %>

<div class="container " style="padding: 130px 0 !important;">
    <div class=" panel-dark col-xs-12 col-sm-20 col-sm-offset-0">
    <div class="panel panel-heading text-center ">
        <h1>Posts Archive</h1>
    </div>
    <div class="panel-body" id="all">


            
    
            
          
        

    </div>

<!-- <script src="js/ejs.min.js"></script> -->
<script>

  //the url we are making a request to
  var url = "http://localhost:8000/posts";

  $.ajax({
      url: url,
      method: 'get',
      success: function(data){
          //do something when call is successful
          // console.log(data);
          let posts = data;
          
          // With jQuery:
        //   $('#all').html(html);
          // Vanilla JS:
          var html= document.getElementById('all').innerHTML;
      }, 
      error: function(error){
          console.log(error);
      }
  });

</script>

<script>

  //targeting my container
  var box = document.getElementById('all');

  //the url we are making a request to
  var url = "http://localhost:8000/posts";

  $.ajax({
      url: url,
      method: 'get',
      success: function(data){
        //   do something when call is successful
          console.log(data);

          $.each(data, function(index, value){

              var container = document.createElement('div');
              container.className = 'col-xs-15 col-md-15';

              var panel = document.createElement('div');
              panel.className = 'panel panel-default';

              var body = document.createElement('div');
              body.className = "panel-body";

              var footer = document.createElement('div');
              footer.className = 'panel-footer';

              var image = document.createElement('IMG');
              image.setAttribute('src', value.image);

              var title = document.createTextNode(value.title);
              
              var author = document.createTextNode(value.author);
              var description = document.createTextNode(value.description);

              container.appendChild(title);
              body.appendChild(author);
              footer.appendChild(description);
              body.appendChild(image);
              panel.appendChild(body);
              panel.appendChild(footer);
              container.appendChild(panel);

              box.appendChild(container);
              
          });

      }, 
      error: function(error){
          console.log(error);
      }
  });
</script>

<div class="text-center" style="color: black !important;">

    <p>All rights reserved 2018 | Shanton.</p>

</div>

</body>
<% include partials/script %>
</html>