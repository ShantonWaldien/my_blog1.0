<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Archive | Midnight Club</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Staatliches|Ubuntu" rel="stylesheet">z

    <style>
        body { padding-top:15px; background-color: #ccc;}
        img { width: 100%;}
        
    </style>
 
</head>
<body>
    <!-- Navbar -->
<% include partials/menu.ejs %>

<div class="container">
    <div class="panel panel-danger">
      <div class="panel panel-heading text-center">
          <h1>Mathematics Archive</h1>
      </div>
      <div class="panel-body" id="all">

          <!-- <a href="/create ">
              <div class="col-xs-6 col-md-2">
                  <div class="panel panel-default">
                      <div class="panel-body">
                          <img src="https://png.icons8.com/ios/1600/add.png">
                      </div>
                      <div class="panel-footer">
                          New pokemon
                      </div>
                  </div>
              </div> 
          </a> -->

      </div>

<!-- <script src="js/ejs.min.js"></script> -->
<script>

  //the url we are making a request to
  var url = "http://localhost:8000/pokemon";

  $.ajax({
      url: url,
      method: 'get',
      success: function(data){
          //do something when call is successful
          // console.log(data);
          let pokemon = data;
          
          // With jQuery:
        //   $('#all').html(html);
          // Vanilla JS:
          var html= document.getElementById('all').innerHTML;
      }, 
      error: function(error){
          console.log(error);
      }
  });

</script>

<script>

  //targeting my container
  var box = document.getElementById('all');

  //the url we are making a request to
  var url = "http://localhost:8000/pokemon";

  $.ajax({
      url: url,
      method: 'get',
      success: function(data){
        //   do something when call is successful
          console.log(data);

          $.each(data, function(index, value){

              var container = document.createElement('div');
              container.className = 'col-xs-6 col-md-5';

              var panel = document.createElement('div');
              panel.className = 'panel panel-default';

              var body = document.createElement('div');
              body.className = "panel-body";

              var footer = document.createElement('div');
              footer.className = 'panel-footer';

              var image = document.createElement('IMG');
              image.setAttribute('src', value.image);

              var title = document.createTextNode(value.title);
              
              var author = document.createTextNode(value.author);
              var description = document.createTextNode(value.description);

              body.appendChild(title);
              footer.appendChild(author);
              footer.appendChild(description);
              body.appendChild(image);
              panel.appendChild(body);
              panel.appendChild(footer);
              container.appendChild(panel);

              box.appendChild(container);
              
          });

      }, 
      error: function(error){
          console.log(error);
      }
  });
</script>

</body>
<% include partials/script %>
</html>